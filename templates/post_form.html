{{ template "header" .Globals }}
{{ $g := .Globals }}

{{ with .Locals }}

<div class="container-fluid my-3">
  <form action="" method="post">
    <div id="post" class="post">
      <div class="form-group">
        <h1>POST FORM</h1>
        <label for="title" class="h5">Title</label>
        <input class="form-control" type="text" name="title" value="{{ .Post.Title }}">
      </div>

      <!-- Tags -->
      <div>
        <label for="tags" class="h5">Tags</label>
        <input class="form-control"
               id="tags"
               placeholder="tag1,tag2,tag3"
               value="{{ range $i, $tag := .Post.Tags }}{{ if $i }},{{ end }}{{ $tag }}{{ end }}"
               >
        <!--
        <input class="form-control" id="tags" list="datalistTags" placeholder="tag">
        <datalist id="datalistTags">
          {{ range $_, $t := $g.AllTags }}
          <option value="{{ $t }}">{{ $t }}</option>
          {{ end }}
        </datalist>-->
      </div>

      <div class="d-flex post-content">
        <textarea class="w-50 p-3 me-0 border-1 min-height-50" name="markdown" hx-post="/render-markdown" hx-trigger="keyup changed delay:250ms" hx-target="#rendered"></textarea>
        <div id="rendered" class="w-50 overflow-scroll bg-secondary bg-opacity-25 border-1 min-height-50 p-3">
        </div>
      </div>
      <footer class="text-muted">
        <p class="small">Created at {{ .Post.CreatedTime.Format "2006-01-02 15:04:05" }}<br>Updated at {{ .Post.ModifiedTime.Format "2006-01-02 15:04:05" }}</p>
        <button type="submit" type="submit" class="btn btn-success btn-sm">Save</button>
      </footer>
    </div>
  </form>
</div>
{{ end }}

{{ template "footer" .Globals }}
